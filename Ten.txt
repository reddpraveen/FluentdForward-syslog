- name: Append data to CSV file with separate columns
  hosts: localhost
  tasks:
    - name: Run a command to get some output (example task)
      command: echo "value_from_command"
      register: X

    - name: Define another variable
      set_fact:
        var2: "value2"

    - name: Append data to CSV file
      copy:
        content: "{{ X.stdout }},{{ var2 }}\n"
        dest: /path/to/yourfile.csv
        remote_src: yes
        mode: '0644'
      delegate_to: localhost


npx create-react-app crd-comparator
cd crd-comparator
npm install axios
// src/App.js
import React, { useState } from 'react';
import axios from 'axios';

function App() {
    const [crdsA, setCrdsA] = useState([]);
    const [crdsB, setCrdsB] = useState([]);
    const [diffs, setDiffs] = useState([]);
    const [loading, setLoading] = useState(false);

    const fetchCRDs = async () => {
        setLoading(true);
        try {
            const response = await axios.get("http://localhost:8080/api/crds/compare", {
                params: { clusterA: "central", clusterB: "east" }
            });
            setCrdsA(response.data.crdsA);
            setCrdsB(response.data.crdsB);
            setDiffs(response.data.diffs);
        } catch (error) {
            console.error("Error fetching CRDs:", error);
        }
        setLoading(false);
    };

    return (
        <div className="App">
            <h1>CRD Comparator</h1>
            <button onClick={fetchCRDs} disabled={loading}>
                {loading ? "Loading..." : "Fetch & Compare CRDs"}
            </button>

            <h2>Cluster A (Central)</h2>
            <pre>{JSON.stringify(crdsA, null, 2)}</pre>

            <h2>Cluster B (East)</h2>
            <pre>{JSON.stringify(crdsB, null, 2)}</pre>

            <h2>Differences</h2>
            <pre>{JSON.stringify(diffs, null, 2)}</pre>
        </div>
    );
}

export default App;
